<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Querying Data :: Kaskada Docs</title>
    <link rel="canonical" href="https://kaskada-ai.github.io/docs-site/kaskada/main/getting-started/querying-data.html">
    <link rel="prev" href="loading-data.html">
    <link rel="next" href="../installing.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://kaskada-ai.github.io/docs-site">Kaskada Docs</a>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>
</header><div class="body">
<div class="nav-container" data-component="kaskada" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="installation.html">Kaskada Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="loading-data.html">Loading Data</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="querying-data.html">Querying Data</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installing.html">Installing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../loading-data.html">Loading Data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/tables.html">Tables</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/queries.html">Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/example-queries.html">Example Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/slices.html">Slices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/views.html">Views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developing/materializations.html">Working with Materializations</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrating</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrating/integrating-with-feature-stores.html">Integrating with ML feature stores</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tools and Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tools-and-resources/training-realtime-ml-models.html">Training real-time ML models</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tools-and-resources/exporting-for-training.html">Example Modeling Problem</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Fenl</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fenl/fenl-quick-start.html">Fenl Quick Start</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../fenl/language-guide.html">Fenl Language Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/data-model.html">Data model</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/syntax.html">Syntax</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/entities.html">Entities</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/temporal-aggregation.html">Temporal Computation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/aggregation-and-windowing.html">Aggregation and Windowing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/continuity.html">Continuity</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fenl/catalog.html">Fenl Catalog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fenl/fenl-faq.html">Fenl FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fenl/working-with-records.html">Working with Records</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Kaskada Documentation</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="installation.html">Kaskada Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="installation.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="installation.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="installation.html">Kaskada Documentation</a></li>
    <li>Getting Started</li>
    <li><a href="querying-data.html">Querying Data</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Querying Data</h1>
<div class="sect1">
<h2 id="writing-queries"><a class="anchor" href="#writing-queries"></a><a class="link" href="#writing-queries">Writing Queries</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can write queries in a number of ways with Kaskada. Here we start
with fenlmagic because these queries are not persistent. As you are
iterating in Jupyter it can be helpful to build up your feature and time
selection as you go, once you&#8217;d like to persist a query, check out our
article on <a href="../developing/views.html" class="xref page">Sharing Queries</a>.</p>
</div>
<div class="paragraph">
<p>You can make Fenl queries by prefixing a query block with <code>%%fenl</code>. The
query results will be computed and returned as a Pandas dataframe. The
query content starts on the next line and includes the rest of the code
block&#8217;s contents.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start by looking at the Purchase table without any filters, this
query will return all of the columns and rows contained in a table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-IPython hljs" data-lang="IPython">%%fenl
Purchase</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note: this table is intentionally small so that you can get to know
queries with Kaskada. When you upload your own data, you may want to
filter down the results so that you can see just a relevant sample:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-IPython hljs" data-lang="IPython">%%fenl
Purchase | when(Purchase.customer_id == "patrick")</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you begin to better understand your data you can start using
aggregations over your data such as the max() function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-IPython hljs" data-lang="IPython">%%fenl
{
   max_purchase: Purchase.amount | max(),
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These results may be surprising if you were expecting a single value,
this is a feature, not a bug!</p>
</div>
<div class="paragraph">
<p>Computations in Fenl are temporal: they produce a time-series of values
describing the full history of a computation&#8217;s results. Temporal
computation allows Fenl to capture what an expression&#8217;s value would have
been at arbitrary times in the past.</p>
</div>
<div class="paragraph">
<p>Fenl values can time-travel forward through time. Time travel allows
combining the result of different computations at different points in
time. Because values can only travel forward in time, Fenl prevents
information about the future from "leaking" into the past.</p>
</div>
<div class="paragraph">
<p>Read more in the <a href="../fenl/language-guide.html" class="xref page">Fenl
Language Guide</a></p>
</div>
<div class="paragraph">
<p>Now we can start building up our features. To reduce the set of columns
output in your query, you can define a record with the curly braces
<code>{ }</code> and name the columns with a label shown on the left of the <code>:</code> in
the below query. In order to debug your features, we recommend including
the time and the entity with each query so that you can walk through the
results in time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-IPython hljs" data-lang="IPython">%%fenl
{
    time: Purchase.purchase_time,
    entity: Purchase.customer_id,
    max_amount: Purchase.amount | max(),
    min_amount: Purchase.amount | min(),
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tip: the result of a previous cell in Jupyter is available to be saved
by setting a variable to the result temporarily stored as <code>_</code>. You can
then interact with these results at a typical dataframe such as
displaying the columns or plotting a histogram:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-IPython hljs" data-lang="IPython">df_explore = _
df_explore.dataframe.columns</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more help writing queries, see <a href="../developing/queries.html" class="xref page">Reference -
Writing Queries</a></p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="loading-data.html">Loading Data</a></span>
  <span class="next"><a href="../installing.html">Installing</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
&copy; Copyright The Kaskada Authors 
</footer><script src="../../../_/js/site.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script src="../../../_/js/vendor/fenl.min.js"></script>
<script>hljs.highlightAll();</script>
  </body>
</html>
