<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Kaskada Docs</title>
    <link rel="canonical" href="https://kaskada-ai.github.io/docs-site/kaskada/main/getting-started/overview.html">
    <link rel="prev" href="../index.html">
    <link rel="next" href="hello-world.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://kaskada-ai.github.io/docs-site">Kaskada Docs</a>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>
</header><div class="body">
<div class="nav-container" data-component="kaskada" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Kaskada Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="hello-world.html">Hello World</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="hello-client-setup.html">Client Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="hello-loading-data.html">Loading Data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="hello-querying-data.html">Querying Data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="hello-sharing-queries.html">Sharing Queries</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How-To Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../how-to-guides/exporting-for-training.html">Exporting Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../how-to-guides/integrating-with-feature-stores.html">Serving Features</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/client-authentication.html">Client Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/client-credentials.html">Client Credentials</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/client-installation.html">Client Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/expected-file-format.html">Expected File Format</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/tables.html">Working with Tables</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/views.html">Working with Views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/writing-queries.html">Writing Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/example-queries.html">Examples Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/working-with-materializations.html">Working with Materializations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/working-with-slices.html">Working with Slices</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Fenl</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fenl/fenl-quick-start.html">Fenl Quick Start</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../fenl/language-guide.html">Fenl Language Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/data-model.html">Data model</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/syntax.html">Syntax</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/entities.html">Entities</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/temporal-aggregation.html">Temporal Computation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/aggregation-and-windowing.html">Aggregation and Windowing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fenl/continuity.html">Continuity</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fenl/catalog.html">Fenl Catalog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fenl/fenl-faq.html">Fenl FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fenl/working-with-records.html">Working with Records</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Kaskada Documentation</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Kaskada Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Kaskada Documentation</a></li>
    <li>Getting Started</li>
    <li><a href="overview.html">Overview</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kaskada is a query engine for event-based data, designed for building &amp; operating real-time ML at scale.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-is-real-time-ml"><a class="anchor" href="#what-is-real-time-ml"></a><a class="link" href="#what-is-real-time-ml">What is real-time ML?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Real-time ML is making predictions based on recent events - reacting to what&#8217;s happening now,
rather than what happened yesterday.
Many outcomes can&#8217;t be predicted accurately from features computed the day before.</p>
</div>
<div class="paragraph">
<p>Real-time models can be difficult to build.
Models must be trained from examples that each capture specific instants in time, computed over historical datasets spanning months or years.
Once a model is trained those same features must be kept up-to-date as new events arrive.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-does-kaskada-help-build-real-time-ml"><a class="anchor" href="#how-does-kaskada-help-build-real-time-ml"></a><a class="link" href="#how-does-kaskada-help-build-real-time-ml">How does Kaskada help build real-time ML?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s start with an example - imagine we&#8217;re trying to build a real-time model for a mobile game.
We want to predict an outcome, for example, if a user will pay for an upgrade.</p>
</div>
<div class="sect2">
<h3 id="a-framework-for-training-real-time-ml-models"><a class="anchor" href="#a-framework-for-training-real-time-ml-models"></a><a class="link" href="#a-framework-for-training-real-time-ml-models">A framework for training real-time ML models</a></h3>
<div class="paragraph">
<p>We&#8217;re collecting and storing events about what users are doing.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/event.png" alt="Example event">
</div>
<div class="title">Figure 1. An example event</div>
</div>
<div class="paragraph">
<p>These events describe when users win, when they lose, when they buy things, when they they talk to each other.
To make predictions we must train a model using examples composed of input features and target labels.
Each example must be computed from the events we&#8217;re collecting.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/event-context.png" alt="Events in time">
</div>
</div>
<div class="paragraph">
<p>Visualizing events chronologically allows us to understand the context of each event, and the story of what&#8217;s happening.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first player likes to brag about their victories</p>
</li>
<li>
<p>The game was too hard for the second player</p>
</li>
<li>
<p>The third player pays for upgrades when they get frustrated.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We&#8217;d like to capture this type of time-based insight as feature values we can use to train a model.
We can do this by drawing the result of feature computations as a timeline showing how the feature&#8217;s value changes as each event is observed.
This timeline allows us to “observe” the value of the feature at any point in time, giving us a framework for training real-time ML models:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/framework.png" alt="Real-time ML framework">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start with raw events and compute feature timelines</p>
</li>
<li>
<p>Observe features at the points in time a prediction would be made to build a training example</p>
</li>
<li>
<p>Move each example forward in time until the predicted outcome can be observed</p>
</li>
<li>
<p>Compute the correct target value and append it to the example</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Implementing each of these four steps allows us to compute a set of training examples where each example captures the value of our model&#8217;s input features at a specific point in time as well as the model&#8217;s target label at a (potentially different) point in time.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s explore how Kaskada allows us to implement this framework for our example problem. Kaskada treats events as rows in tables - we&#8217;ll focus on two tables describing the result of users playing our game, <code>GameVictory</code> and <code>GameDefeat</code>.</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<caption class="title">Table 1. <code>GameVictory</code> events</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">entity</th>
<th class="tableblock halign-left valign-top">value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2:30</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Alice</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{duration: 10s}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3:58</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{duration: 23s}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4:25</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{duration: 8s}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5:05</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Alice</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{duration: 53s}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10:01</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Alice</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{duration: 43s}</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stripes-even stretch">
<caption class="title">Table 2. <code>GameDefeat</code> events</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">entity</th>
<th class="tableblock halign-left valign-top">value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2:35</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{duration: 3s}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3:46</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{duration: 8s}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5:36</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Alice</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{duration: 2s}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>7:22</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{duration: 7s}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>8:35</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Alice</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{duration: 5s}</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="step-1-define-features"><a class="anchor" href="#step-1-define-features"></a><a class="link" href="#step-1-define-features">Step 1: Define features</a></h3>
<div class="paragraph">
<p>We want to predict if a user will pay for an upgrade - step one is to compute features from events.
As a first simple feature, we describe the amount of time a user as spent losing at the game - users who lose a lot are probably more likely to pay for upgrades.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-IPython hljs" data-lang="IPython">let features = { <i class="conum" data-value="1"></i><b>(1)</b>
  loss_duration: sum(GameVictory.duration) } <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Construct a record containing a single field named <code>loss_dur</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Compute the sum of each victory event&#8217;s duration field</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">entity</th>
<th class="tableblock halign-left valign-top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2:30</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Alice</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ loss_dur: 10s }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3:58</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ loss_dur: 23s }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4:25</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ loss_dur: 31s }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5:05</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Alice</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ loss_dur: 63s }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10:01</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Alice</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ loss_dur: 106s }</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Notice that the result is a timeline describing the step function of how this feature has changed over time. We can “observe” the value of this step function at any time, regardless of the times at which the original events occurred.</p>
</div>
<div class="paragraph">
<p>Another thing to notice is that these results are automatically grouped by user. We didn&#8217;t have to explicitly group by user because tables in Kaskada specify an "entity" associated with each row.</p>
</div>
</div>
<div class="sect2">
<h3 id="step-2-define-prediction-times"><a class="anchor" href="#step-2-define-prediction-times"></a><a class="link" href="#step-2-define-prediction-times">Step 2: Define prediction times</a></h3>
<div class="paragraph">
<p>The second step is to observe our feature at the times a prediction would have been made.
Let&#8217;s assume that the game designers want to offer an upgrade any time a user loses the game twice in a row.
We can construct a set of examples associated with this prediction time by observing our feature <code>when</code> the user loses twice in a row.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-IPython hljs" data-lang="IPython">let features = {
  loss_duration: sum(GameVictory.duration) }

let examples = features <i class="conum" data-value="1"></i><b>(1)</b>
  | when(count(GameDefeat, window=since(GameVictory)) == 2) <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The feature record we created previously</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Build a sequence of operations using the pipe operator</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>You can think of this query as walking over our events chronologically, counting how many <code>GameDefeat</code> events have bene seen since the most recent <code>GameVictory</code> event</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">entity</th>
<th class="tableblock halign-left valign-top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3:46</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ loss_dur: 23s }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>8:35</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Alice</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ loss_dur: 63s }</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This query gives us a set of examples, each containing input features computed at the specific times we would like to make a prediction.</p>
</div>
</div>
<div class="sect2">
<h3 id="step-3-shift-examples"><a class="anchor" href="#step-3-shift-examples"></a><a class="link" href="#step-3-shift-examples">Step 3: Shift examples</a></h3>
<div class="paragraph">
<p>The third step is to move each example to the time when the outcome we&#8217;re predicting can be observed.
We want to give the user some time to see the upgrade offer, decide to accept it, and pay - let&#8217;s check to see if they accepted an hour after we make the offer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-IPython hljs" data-lang="IPython">let features = {
  loss_duration: sum(GameVictory.duration) }

let examples = features
  | when(count(GameDefeat, window=since(GameVictory)) == 2) <i class="conum" data-value="1"></i><b>(1)</b>
  | shift_by(hours(1)) <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The examples we created previously</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Shift the results of the last step forward in time by one hour - visually you could imagine dragging the examples forward in the timeline by one hour</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">entity</th>
<th class="tableblock halign-left valign-top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4:46</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ loss_dur: 23s }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>9:35</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Alice</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ loss_dur: 63s }</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Our training examples have now moved to the point in time when the label we want to predict can be observed.
Notice that the values in the time column are an hour later than the previous step.</p>
</div>
</div>
<div class="sect2">
<h3 id="step-4-label-examples"><a class="anchor" href="#step-4-label-examples"></a><a class="link" href="#step-4-label-examples">Step 4: Label examples</a></h3>
<div class="paragraph">
<p>The final step is to see if a purchase happened after the prediction was made. This will be our target value and we&#8217;ll add it to the records that currently contain our feature.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-IPython hljs" data-lang="IPython">let features = {
  loss_duration: sum(GameVictory.duration),
  purchase_count: count(Purchase) } <i class="conum" data-value="1"></i><b>(1)</b>

let example = features
  | when(count(GameDefeat, window=since(GameVictory)) == 2)
  | shift_by(hours(1))

let target = count(Purchase) &gt; example.purchase_count <i class="conum" data-value="2"></i><b>(2)</b>

in extend(example, {target}) <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Capture purchase count as a feature</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Compare purchase count at prediction and label time.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Append the target value to each example</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">entity</th>
<th class="tableblock halign-left valign-top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4:46</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ loss_dur: 23s, target: true }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>9:35</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Alice</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ loss_dur: 63s, target: false }</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We&#8217;re done! The result of this query is a training dataset ready to be used as input to a model algorithm. To review the process so far:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/framework.png" alt="Real-time ML framework">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We computed the time spent in loosing games from the events we collected</p>
</li>
<li>
<p>We generated training examples each time the a user lost twice in a row</p>
</li>
<li>
<p>We shifted those examples forward in time one hour</p>
</li>
<li>
<p>Finally, we computed the target value by checking for purchases since the prediction was made.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next-steps"><a class="anchor" href="#next-steps"></a><a class="link" href="#next-steps">Next Steps</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This was a quick introduction to how Kaskada organizes the process of training real-time AI/ML models, but this is just the beginning.</p>
</div>
<div class="paragraph">
<p><a href="hello-loading-data.html" class="xref page">Continue reading about Kaskada&#8217;s features</a> to learn more about how Kaskada&#8217;s temporal query capabilitites, how the compute engine supports interactive exploration of features and model contexts, and how the features used to train a model can be used in real-time without modification.</p>
</div>
<div class="paragraph">
<p><a href="hello-client-setup.html" class="xref page">Install Kaskada locally</a> to begin exploring Kaskada yourself.</p>
</div>
<div class="paragraph">
<p><a href="../fenl/language-guide.html" class="xref page">Learn more about Kaskada&#8217;s query language</a> to get a feel for the type of features and temporal operations Kaskada supports.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../index.html">Kaskada Documentation</a></span>
  <span class="next"><a href="hello-world.html">Hello World</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
&copy; Copyright The Kaskada Authors 
</footer><script src="../../../_/js/site.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script src="../../../_/js/vendor/fenl.min.js"></script>
<script>hljs.highlightAll();</script>
  </body>
</html>
