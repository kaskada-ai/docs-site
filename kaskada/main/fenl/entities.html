<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Kaskada Docs</title>
    <link rel="prev" href="syntax.html">
    <link rel="next" href="temporal-aggregation.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="../../..">Kaskada Docs</a>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>
</header><div class="body">
<div class="nav-container" data-component="kaskada" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Kaskada Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../getting-started/hello-world.html">Hello World</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../getting-started/hello-client-setup.html">Client Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../getting-started/hello-loading-data.html">Loading Data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../getting-started/hello-querying-data.html">Querying Data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../getting-started/hello-sharing-queries.html">Sharing Queries</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://colab.research.google.com/drive/1gPshkDfMQEb_DJ6qalGJVai-Uj0oV7zO?usp=sharing">Hello World Notebook (Collab)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://colab.research.google.com/drive/1dLK18pjf9puYZDuA_otIP3NvJYCUBSgR?usp=sharing">Customer Retention Demo Notebook</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://colab.research.google.com/drive/1eFcrgVGcV2skqNEiNDhV5DvCPwLmuqVs?usp=sharing">ML Workshop Demo (Colab)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://colab.research.google.com/drive/1Wg02zrxrJI_EEN8sAtoEXsRM7u8oDdBw?usp=sharing">Comparison of Fenl SQL Pandas (Colab)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How-To Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../how-to-guides/exporting-for-training.html">Exporting Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../how-to-guides/integrating-with-feature-stores.html">Serving Features</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/client-authentication.html">Client Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/client-credentials.html">Client Credentials</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/client-installation.html">Client Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/expected-file-format.html">Expected File Format</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/tables.html">Working with Tables</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/views.html">Working with Views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/writing-queries.html">Writing Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/example-queries.html">Examples Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/working-with-materializations.html">Working with Materializations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/working-with-slices.html">Working with Slices</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Fenl</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fenl-quick-start.html">Fenl Quick Start</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="language-guide.html">Fenl Language Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="data-model.html">Data model</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="syntax.html">Syntax</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="entities.html">Entities</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="temporal-aggregation.html">Temporal Computation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="aggregation-and-windowing.html">Aggregation and Windowing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="continuity.html">Continuity</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="catalog.html">Fenl Catalog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fenl-faq.html">Fenl FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="working-with-records.html">Working with Records</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Kaskada Documentation</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Kaskada Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Kaskada Documentation</a></li>
    <li>Fenl</li>
    <li><a href="language-guide.html">Fenl Language Guide</a></li>
    <li><a href="entities.html">Entities</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="paragraph">
<p>Entities are how Kaskada organizes data for use in feature engineering.
They describe the particular objects that are being represented in the
system.</p>
</div>
<div class="sect1">
<h2 id="what-is-an-entity"><a class="anchor" href="#what-is-an-entity"></a><a class="link" href="#what-is-an-entity">What is an Entity?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Entities represent the categories or "nouns" in Kaskada&#8217;s system and can
generally be thought of as any category of object that can be identified
from the data sets ingested into the system. Common examples of entities
are "Users" or "Vendors".</p>
</div>
<div class="paragraph">
<p>If something can be given a name or other unique identifier, it can
probably be expressed as an entity. In a relational database, an entity
would be anything that is identified by the same key in a set of tables.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-is-an-entity-key"><a class="anchor" href="#what-is-an-entity-key"></a><a class="link" href="#what-is-an-entity-key">What is an Entity Key?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>While Entities represent a category of a type of thing, an "Entity Key"
represents a specific item in that category. Below is a table with some
example Entities and specific Entity instances.</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Entity</th>
<th class="tableblock halign-left valign-top">Example Entity Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1600 Pennsylvania Ave</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Airport</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Customer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">John Doe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">City</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seattle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">State</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Washington</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="how-are-entities-used"><a class="anchor" href="#how-are-entities-used"></a><a class="link" href="#how-are-entities-used">How are Entities Used?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>To demonstrate how entities affect Fenl expressions, we&#8217;ll start with a
simplified dataset consisting of two tables. The <code>Purchase</code> table
describes purchase transactions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{ customer_id: string, time: datetime, product_id: string, amount: number }</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">entity(customer_id)</th>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">product_id</th>
<th class="tableblock halign-left valign-top">amount</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>patrick</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>krabby_patty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3.99</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>squidward</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>101</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>krabby_patty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5.99</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>ProductReview</code> table describes customer&#8217;s ratings of products
they&#8217;ve purchased</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{ customer_id: string, time: datetime, product_id: string, stars: number }</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">entity(customer_id)</th>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">product_id</th>
<th class="tableblock halign-left valign-top">stars</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>patrick</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>krabby_patty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>squidward</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>101</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>krabby_patty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="per-entity-aggregation"><a class="anchor" href="#per-entity-aggregation"></a><a class="link" href="#per-entity-aggregation">Per-entity Aggregation</a></h3>
<div class="paragraph">
<p>All aggregations (ie <code>sum</code>, <code>count</code>, etc) are scoped to the entities of
the aggregated expression. For example the purchase count will produce
per-customer results.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-fenl hljs" data-lang="fenl">Purchase | count()</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">entity(customer_id)</th>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">Purchase</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">count()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>patrick</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>squidward</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>101</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="cross-table-operations"><a class="anchor" href="#cross-table-operations"></a><a class="link" href="#cross-table-operations">Cross-Table Operations</a></h3>
<div class="paragraph">
<p>If two tables describe the same entity they can be combined without the
need to provide join conditions. The entity key acts as an implicit join
key. For example, "customers" are the entity for both the <code>Purchase</code> and
<code>ProductReview</code> tables. We can combine aggregations over each table
without any boilerplate join code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-fenl hljs" data-lang="fenl">{
  p_count: Purchase | count(),
  c_avg_rating: ProductReview.stars | mean(),
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">entity(customer_id)</th>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">output</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>patrick</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ p_count: 1, c_avg_rating: 5 }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>squidward</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>101</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ p_count: 1, c_avg_rating: 2 }</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changing-entities"><a class="anchor" href="#changing-entities"></a><a class="link" href="#changing-entities">Changing Entities</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some values are related to more than one entity, for example a
<code>ProductReview</code> may be related to both the customer who reviewed a
product and the product that was reviewed. An expression&#8217;s entity can be
changed by providing a new entity key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-fenl hljs" data-lang="fenl">ProductReview | with_key(ProductReview.product_id)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">customer_id</th>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">entity(product_id)</th>
<th class="tableblock halign-left valign-top">stars</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>patrick</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>krabby_patty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>squidward</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>101</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>krabby_patty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Changing an expression&#8217;s entity has no effect on the values produced by
the expression. The change only becomes visible when the result is used
in an operation that depends on entity key, for example an aggregation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-fenl hljs" data-lang="fenl">ProductReview
  | with_key(ProductReview.product_id)
  | mean()</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">entity(product_id)</th>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">&#8230;&#8203; mean()</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>krabby_patty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>krabby_patty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>101</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3.5</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="working-with-different-entities"><a class="anchor" href="#working-with-different-entities"></a><a class="link" href="#working-with-different-entities">Working with different entities</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In many cases it&#8217;s necessary to combine values associated with different
entities. This can be accomplished by looking up the value of an
expression for a particular key.</p>
</div>
<div class="paragraph">
<p>The lookup function takes two arguments: the first argument (the key
expression) describes the entity key being looked up, and the second
argument (the foreign expression) describes the value to be looked up:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-fenl hljs" data-lang="fenl">let avg_review_by_product = ProductReview
  | with_key(ProductReview.product_id)
  | mean()

in {
  p_count: Purchase | count(),
  c_avg_rating: ProductReview.stars | mean(),
  p_avg_rating: avg_review_by_product | lookup($input, Purchase.product_id)
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">entity(customer_id)</th>
<th class="tableblock halign-left valign-top">time</th>
<th class="tableblock halign-left valign-top">output</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>patrick</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ p_count: 1, c_avg_rating: 5, p_avg_rating: 5 }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>squidward</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>101</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ p_count: 1, c_avg_rating: 2, p_avg_rating: 3.5 }</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A lookup expression produces the value of the foreign expression at
every time the key expression produces a non-null value.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Time Travel</div>
<div class="paragraph">
<p>Just like every other Fenl expression, lookups are
<a href="temporal-aggregation.html" class="xref page">temporal</a>. This means that the value produced
by a lookup expression accurately reflects the value being looked up <em>at
the time it&#8217;s produced</em>. With Kaskada, information <strong>cannot</strong> travel
backwards in time, just like in the real world.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="entities-in-query-results"><a class="anchor" href="#entities-in-query-results"></a><a class="link" href="#entities-in-query-results">Entities In Query Results</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>All Fenl expressions are associated with an entity, and all Fenl values
are associated with an entity key.</p>
</div>
<div class="paragraph">
<p>Fenl queries return every non-null value produced by the query
expression. There are cases where an entity exists in a table, but
doesn&#8217;t produce any values for a given query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-fenl hljs" data-lang="fenl">let total = Purchase.amount | sum()
in { total: total | if(total &gt;= 0) }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This expression may produce zero rows for any entities whose <code>total</code> is
negative, because null values are omitted from query results. To capture
the null value, the conditional can be moved inside a record; the value
will be null, but the enclosing record won&#8217;t be.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-fenl hljs" data-lang="fenl">let total = Purchase.amount | sum()
in { total: total | if(total &gt;= 0) }</code></pre>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="syntax.html">Syntax</a></span>
  <span class="next"><a href="temporal-aggregation.html">Temporal Computation</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
&copy; Copyright The Kaskada Authors 
</footer><script src="../../../_/js/site.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script async src="../../../_/js/vendor/fenl.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
